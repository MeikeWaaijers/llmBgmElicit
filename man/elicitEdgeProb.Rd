% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/elicitEdgeProb.R
\name{elicitEdgeProb}
\alias{elicitEdgeProb}
\title{Elicit Prior Edge Inclusion Probabilities Using a LLM
by explicitly taking into account the LLMs decision for the remaining
variables}
\usage{
elicitEdgeProb(
  context,
  variable_list,
  LLM_model = "gpt-4o",
  max_tokens = 2000,
  update_key = FALSE,
  n_perm = NULL,
  seed = 123,
  prompt_specs = NULL
)
}
\arguments{
\item{context}{Optional character string providing background information or study context
to be incorporated into the LLM prompt. Defaults to \code{NULL}.}

\item{variable_list}{A character vector of variable names. Must contain at least three variables.}

\item{LLM_model}{Character string indicating which LLM to use. Options include:
\code{"gpt-4o"}, \code{"gpt-4-turbo"}, \code{"gpt-3.5-turbo"}, \code{"mixtral"}, or \code{"llama-3"}.}

\item{max_tokens}{Integer specifying the maximum number of tokens to generate.
The allowed maximum varies by model: 6000 for GPT-4 variants, 3000 for GPT-3.5.}

\item{update_key}{Logical. If \code{TRUE}, updates the API key used for the LLM call.
Only the first call will use the updated key. Default is \code{FALSE}.}

\item{n_perm}{Integer or \code{NULL}. Number of random permutations of pair orders to evaluate.
If \code{NULL}, two permutations are generated by default. The maximum is 50.}

\item{seed}{Integer. Random seed for reproducibility of the permutations. Default is \code{123}.}

\item{prompt_specs}{Optional list containing user/system prompt overrides. Each entry must
contain \code{user} and \code{system} strings. If \code{NULL}, a default network prompt is used.}
}
\value{
A list of class \code{"elicitEdgeProb"} with the following elements:
\describe{
\item{\code{relation_df}}{A data frame with columns \code{var1}, \code{var2}, and \code{prob}, representing
the prior probability of a conditional association between variable pairs.}
\item{\code{raw_LLM}}{A data frame with raw responses and prompt metadata for each pair across permutations.}
\item{\code{arguments}}{A list with the function call arguments for reproducibility.}
}
}
\description{
This function queries a large language model (LLM) to elicit prior probabilities
about conditional associations (edges) between variable pairs in a Markov random field,
a Markov random Field graphical model given optional context and permutations of variable pair order.
}
\details{
The function iteratively evaluates each variable pair, updating a decision context
that is passed to the LLM to consider previous decisions. It returns edge probabilities
averaged across sampled permutations of pair orders.

Each pair is evaluated in the context of previously judged pairs, based on the current permutation.
The returned probabilities are averaged across permutations.
}
\examples{
\dontrun{
result <- elicitEdgeProb(
  context = "This study investigates the relationship between anxiety, sleep,
  and concentration.",
  variable_list = c("Anxiety", "Sleep", "Concentration"),
  LLM_model = "gpt-4o",
  n_perm = 2
)
print(result$relation_df)
}

}
